<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>164-maximum_gap - Peter's Coding Notes</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://peter14f.github.io/pelican-blog/164-maximum_gap.html">

        <meta name="author" content="Peter Hsieh" />
        <meta name="keywords" content="Pigeonhole Principle" />
        <meta name="description" content="LeetCode Problem Link The problem is asking for the largest gap between two element in the sorted version of the input array. The hard part is to do in in linear time. We all know that comparison-based sorting algorithms take O(n log n) time. Let n be the size of the input array. In the first pass get max and min. Allocate an array of Bucket of size n-1. class Bucket has two fields max and min. Let delta (a double) be (max - min) / (n-1) Skipping max and min, we have at most n-2 numbers left to place into ..." />

        <meta property="og:site_name" content="Peter's Coding Notes" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="164-maximum_gap"/>
        <meta property="og:url" content="http://peter14f.github.io/pelican-blog/164-maximum_gap.html"/>
        <meta property="og:description" content="LeetCode Problem Link The problem is asking for the largest gap between two element in the sorted version of the input array. The hard part is to do in in linear time. We all know that comparison-based sorting algorithms take O(n log n) time. Let n be the size of the input array. In the first pass get max and min. Allocate an array of Bucket of size n-1. class Bucket has two fields max and min. Let delta (a double) be (max - min) / (n-1) Skipping max and min, we have at most n-2 numbers left to place into ..."/>
        <meta property="article:published_time" content="2016-01-11" />
            <meta property="article:section" content="LeetCode" />
            <meta property="article:tag" content="Pigeonhole Principle" />
            <meta property="article:author" content="Peter Hsieh" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://peter14f.github.io/pelican-blog/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="http://peter14f.github.io/pelican-blog/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://peter14f.github.io/pelican-blog/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="http://peter14f.github.io/pelican-blog/theme/css/style.css" type="text/css"/>

        <link href="http://peter14f.github.io/pelican-blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Peter's Coding Notes ATOM Feed"/>



        <link href="http://peter14f.github.io/pelican-blog/feeds/leetcode.atom.xml" type="application/atom+xml" rel="alternate"
              title="Peter's Coding Notes LeetCode ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://peter14f.github.io/pelican-blog/" class="navbar-brand">
Peter's Coding Notes            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="http://peter14f.github.io/pelican-blog/category/data-structures.html">Data structures</a>
                        </li>
                        <li class="active">
                            <a href="http://peter14f.github.io/pelican-blog/category/leetcode.html">Leetcode</a>
                        </li>
                        <li >
                            <a href="http://peter14f.github.io/pelican-blog/category/misc.html">Misc</a>
                        </li>
                        <li >
                            <a href="http://peter14f.github.io/pelican-blog/category/more-questions.html">More questions</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="http://peter14f.github.io/pelican-blog/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-lg-12">
    <section id="content">
        <article>
                <h2>
                    <a href="http://peter14f.github.io/pelican-blog/164-maximum_gap.html"
                       rel="bookmark"
                       title="Permalink to 164-maximum_gap">
                        164-maximum_gap
                    </a>
                </h2>
            <div class="entry-content">
<footer class="post-info">
    <span class="published label label-default">
        <time datetime="2016-01-11T13:14:00-08:00"> Jan 11 2016</time>
    </span>





<span class="label label-default tag-lists">Tags</span>
	<a href="http://peter14f.github.io/pelican-blog/tag/pigeonhole-principle.html">Pigeonhole Principle</a>
    
</footer><!-- /.post-info -->                <div class="full-article">
                <p><a class="reference external" href="https://leetcode.com/problems/maximum-gap/">LeetCode Problem Link</a></p>
<p>The problem is asking for the largest gap between two element in the sorted version of the input array.</p>
<p>The hard part is to do in in linear time. We all know that comparison-based sorting algorithms take O(n log n) time.</p>
<p>Let <tt class="docutils literal">n</tt> be the size of the input array.</p>
<ol class="arabic simple">
<li>In the first pass get <tt class="docutils literal">max</tt> and <tt class="docutils literal">min</tt>.</li>
<li>Allocate an array of <tt class="docutils literal">Bucket</tt> of size <tt class="docutils literal"><span class="pre">n-1</span></tt>.</li>
</ol>
<p>class <tt class="docutils literal">Bucket</tt> has two fields <tt class="docutils literal">max</tt> and <tt class="docutils literal">min</tt>.</p>
<p>Let <tt class="docutils literal">delta</tt> (a double) be <tt class="docutils literal">(max - min) / <span class="pre">(n-1)</span></tt></p>
<p>Skipping <tt class="docutils literal">max</tt> and <tt class="docutils literal">min</tt>, we have at most n-2 numbers left to place into n-1 buckets.</p>
<p>Using the pigeonhole principe, at least one bucket will be empty. So the minimum gap between two elements in the
sorted version of the array is at least delta.</p>
<ol class="arabic simple" start="3">
<li>Second Pass -&gt; For each number that's not <tt class="docutils literal">max</tt> and not <tt class="docutils literal">min</tt>, find out which bucket it belongs to and update the bucket's max and min value if needed.</li>
<li>Third Pass -&gt; Scan the buckets array and find out gap and update <tt class="docutils literal">maxGap</tt>.</li>
</ol>
<div class="highlight"><pre><span class="kd">class</span> <span class="nc">Bucket</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">min</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">max</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Bucket</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">min</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">max</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">int</span> <span class="nf">maximumGap</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">)</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>

    <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
    <span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>

    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="n">max</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">max</span><span class="o">,</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
        <span class="n">min</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">min</span><span class="o">,</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
    <span class="o">}</span>

    <span class="kt">double</span> <span class="n">delta</span> <span class="o">=</span> <span class="n">max</span><span class="o">-</span><span class="n">min</span><span class="o">;</span>
    <span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span><span class="o">/(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>

    <span class="n">Bucket</span><span class="o">[]</span> <span class="n">buckets</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bucket</span><span class="o">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">];</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">k</span><span class="o">&lt;</span><span class="n">buckets</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">k</span><span class="o">++)</span>
        <span class="n">buckets</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bucket</span><span class="o">();</span>

    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="n">min</span> <span class="o">||</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="n">max</span><span class="o">)</span>
            <span class="k">continue</span><span class="o">;</span>

        <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">((</span><span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">-</span> <span class="n">min</span><span class="o">)/</span><span class="n">delta</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">buckets</span><span class="o">[</span><span class="n">k</span><span class="o">].</span><span class="na">min</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&lt;</span> <span class="n">buckets</span><span class="o">[</span><span class="n">k</span><span class="o">].</span><span class="na">min</span><span class="o">)</span>
            <span class="n">buckets</span><span class="o">[</span><span class="n">k</span><span class="o">].</span><span class="na">min</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">buckets</span><span class="o">[</span><span class="n">k</span><span class="o">].</span><span class="na">max</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">buckets</span><span class="o">[</span><span class="n">k</span><span class="o">].</span><span class="na">max</span><span class="o">)</span>
            <span class="n">buckets</span><span class="o">[</span><span class="n">k</span><span class="o">].</span><span class="na">max</span> <span class="o">=</span> <span class="n">nums</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
    <span class="o">}</span>

    <span class="kt">int</span> <span class="n">maxGap</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">min</span><span class="o">;</span>
    <span class="kt">boolean</span> <span class="n">inGap</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">k</span><span class="o">&lt;</span><span class="n">buckets</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">k</span><span class="o">++)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">buckets</span><span class="o">[</span><span class="n">k</span><span class="o">].</span><span class="na">min</span> <span class="o">==-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">buckets</span><span class="o">[</span><span class="n">k</span><span class="o">].</span><span class="na">max</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">inGap</span><span class="o">)</span>
                <span class="n">inGap</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">inGap</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">gap</span> <span class="o">=</span> <span class="n">buckets</span><span class="o">[</span><span class="n">k</span><span class="o">].</span><span class="na">min</span> <span class="o">-</span> <span class="n">a</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">gap</span> <span class="o">&gt;</span> <span class="n">maxGap</span><span class="o">)</span>
                    <span class="n">maxGap</span> <span class="o">=</span> <span class="n">gap</span><span class="o">;</span>

                <span class="n">inGap</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">buckets</span><span class="o">[</span><span class="n">k</span><span class="o">].</span><span class="na">max</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">inGap</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">gap</span> <span class="o">=</span> <span class="n">max</span> <span class="o">-</span> <span class="n">a</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">gap</span> <span class="o">&gt;</span> <span class="n">maxGap</span><span class="o">)</span>
            <span class="n">maxGap</span> <span class="o">=</span> <span class="n">gap</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">maxGap</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
<p>This approach takes O(n) time and O(n) space.</p>

                </div>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Peter Hsieh
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://peter14f.github.io/pelican-blog/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://peter14f.github.io/pelican-blog/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://peter14f.github.io/pelican-blog/theme/js/respond.min.js"></script>


</body>
</html>