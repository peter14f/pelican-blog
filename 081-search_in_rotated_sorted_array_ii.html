<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>081-search_in_rotated_sorted_array_ii - Peter's Coding Notes</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="http://peter14f.github.io/pelican-blog/081-search_in_rotated_sorted_array_ii.html">

        <meta name="author" content="Peter Hsieh" />
        <meta name="keywords" content="Binary Search,Rotated Sorted Array" />
        <meta name="description" content="LeetCode Problem Link This is a followup problem for 033-search_in_rotated_sorted_array.rst. Allowing duplicates means we can no longer easily detect if numbers from index low to index middle are sorted or not. Let&#39;s check the following example: The array [1, 3, 1, 1, 1] is sorted and then rotated. Using binary search, the low index would start at 0 and the high index would start at 4. middle would therefore be 2. But guess what? nums[low] and numbers[middle] are both 1. But the section of the array from low to middle is actually not sorted. So what ..." />

        <meta property="og:site_name" content="Peter's Coding Notes" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="081-search_in_rotated_sorted_array_ii"/>
        <meta property="og:url" content="http://peter14f.github.io/pelican-blog/081-search_in_rotated_sorted_array_ii.html"/>
        <meta property="og:description" content="LeetCode Problem Link This is a followup problem for 033-search_in_rotated_sorted_array.rst. Allowing duplicates means we can no longer easily detect if numbers from index low to index middle are sorted or not. Let&#39;s check the following example: The array [1, 3, 1, 1, 1] is sorted and then rotated. Using binary search, the low index would start at 0 and the high index would start at 4. middle would therefore be 2. But guess what? nums[low] and numbers[middle] are both 1. But the section of the array from low to middle is actually not sorted. So what ..."/>
        <meta property="article:published_time" content="2015-11-10" />
            <meta property="article:section" content="LeetCode" />
            <meta property="article:tag" content="Binary Search" />
            <meta property="article:tag" content="Rotated Sorted Array" />
            <meta property="article:author" content="Peter Hsieh" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://peter14f.github.io/pelican-blog/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="http://peter14f.github.io/pelican-blog/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://peter14f.github.io/pelican-blog/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="http://peter14f.github.io/pelican-blog/theme/css/style.css" type="text/css"/>

        <link href="http://peter14f.github.io/pelican-blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Peter's Coding Notes ATOM Feed"/>



        <link href="http://peter14f.github.io/pelican-blog/feeds/leetcode.atom.xml" type="application/atom+xml" rel="alternate"
              title="Peter's Coding Notes LeetCode ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://peter14f.github.io/pelican-blog/" class="navbar-brand">
Peter's Coding Notes            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="http://peter14f.github.io/pelican-blog/category/data-structures.html">Data structures</a>
                        </li>
                        <li >
                            <a href="http://peter14f.github.io/pelican-blog/category/java.html">Java</a>
                        </li>
                        <li class="active">
                            <a href="http://peter14f.github.io/pelican-blog/category/leetcode.html">Leetcode</a>
                        </li>
                        <li >
                            <a href="http://peter14f.github.io/pelican-blog/category/misc.html">Misc</a>
                        </li>
                        <li >
                            <a href="http://peter14f.github.io/pelican-blog/category/more-questions.html">More questions</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="http://peter14f.github.io/pelican-blog/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-lg-12">
    <section id="content">
        <article>
                <h2>
                    <a href="http://peter14f.github.io/pelican-blog/081-search_in_rotated_sorted_array_ii.html"
                       rel="bookmark"
                       title="Permalink to 081-search_in_rotated_sorted_array_ii">
                        081-search_in_rotated_sorted_array_ii
                    </a>
                </h2>
            <div class="entry-content">
<footer class="post-info">
    <span class="published label label-default">
        <time datetime="2015-11-10T22:31:00-08:00"> Nov 10 2015</time>
    </span>





<span class="label label-default tag-lists">Tags</span>
	<a href="http://peter14f.github.io/pelican-blog/tag/binary-search.html">Binary Search</a>
        /
	<a href="http://peter14f.github.io/pelican-blog/tag/rotated-sorted-array.html">Rotated Sorted Array</a>
    
</footer><!-- /.post-info -->                <div class="full-article">
                <p><a class="reference external" href="https://leetcode.com/problems/remove-duplicates-from-sorted-array-ii/">LeetCode Problem Link</a></p>
<p>This is a followup problem for 033-search_in_rotated_sorted_array.rst.</p>
<p>Allowing duplicates means we can no longer easily detect if numbers from index <tt class="docutils literal">low</tt> to
index <tt class="docutils literal">middle</tt> are sorted or not. Let's check the following example:</p>
<p>The array <tt class="docutils literal">[1, 3, 1, 1, 1]</tt> is sorted and then rotated. Using binary search, the <tt class="docutils literal">low</tt> index would start
at <tt class="docutils literal">0</tt> and the <tt class="docutils literal">high</tt> index would start at <tt class="docutils literal">4</tt>. <tt class="docutils literal">middle</tt> would therefore be <tt class="docutils literal">2</tt>. But guess what?
<tt class="docutils literal">nums[low]</tt> and <tt class="docutils literal">numbers[middle]</tt> are both 1. But the section of the array from <tt class="docutils literal">low</tt> to <tt class="docutils literal">middle</tt> is
actually not sorted.</p>
<p>So what can we do when we are not able to tell which section of the current input array is sorted? Not much really.
We can eliminate one choice from the input set by decrementing <tt class="docutils literal">high</tt>. Before we do that, we need to make sure that
<tt class="docutils literal">nums[high]</tt> is actually not <tt class="docutils literal">target</tt>.</p>
<p>So what would be the worst case? An long array filled with duplicates except for one number and that number is at index
<tt class="docutils literal">low+1</tt>. The time complexity is O(n). Yet for a lot of other cases (inputs without duplicates for example), the time
complexity can be as good as O(log n)</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">search</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">nums</span><span class="o">,</span> <span class="kt">int</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">h</span> <span class="o">=</span> <span class="n">nums</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>

    <span class="k">while</span> <span class="o">(</span><span class="n">l</span><span class="o">&lt;=</span><span class="n">h</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="o">(</span><span class="n">h</span><span class="o">-</span><span class="n">l</span><span class="o">)/</span><span class="mi">2</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;l=&quot;</span> <span class="o">+</span> <span class="n">l</span> <span class="o">+</span> <span class="s">&quot; h=&quot;</span> <span class="o">+</span> <span class="n">h</span> <span class="o">+</span> <span class="s">&quot; m=&quot;</span> <span class="o">+</span> <span class="n">m</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">m</span><span class="o">]</span> <span class="o">==</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="o">[</span><span class="n">m</span><span class="o">])</span> <span class="o">{</span>
            <span class="c1">// we&#39;re sure that l to m is sorted</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">target</span> <span class="o">&gt;=</span> <span class="n">nums</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="n">target</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="o">[</span><span class="n">m</span><span class="o">])</span> <span class="o">{</span>
                <span class="c1">// target lies within the sorted range</span>
                <span class="n">h</span> <span class="o">=</span> <span class="n">m</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">else</span> <span class="o">{</span>
                <span class="c1">// if target exists, it&#39;s in the other half</span>
                <span class="n">l</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">nums</span><span class="o">[</span><span class="n">m</span><span class="o">])</span> <span class="o">{</span>
            <span class="c1">// we&#39;re sure that m to h is sorted</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">target</span> <span class="o">&gt;</span> <span class="n">nums</span><span class="o">[</span><span class="n">m</span><span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="n">target</span> <span class="o">&lt;=</span> <span class="n">nums</span><span class="o">[</span><span class="n">h</span><span class="o">])</span> <span class="o">{</span>
                <span class="n">l</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">else</span> <span class="o">{</span>
                <span class="c1">// if target exists, it&#39;s in the other half</span>
                <span class="n">h</span> <span class="o">=</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="c1">// cannot determine which half is sorted</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">nums</span><span class="o">[</span><span class="n">h</span><span class="o">]==</span><span class="n">target</span><span class="o">)</span>
                <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
            <span class="c1">// h is also not the answer, decrement h now</span>
            <span class="c1">// note that in this particular step, we&#39;re going</span>
            <span class="c1">// eliminating the input set by one element</span>
            <span class="n">h</span><span class="o">--;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>

                </div>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Peter Hsieh
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://peter14f.github.io/pelican-blog/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://peter14f.github.io/pelican-blog/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://peter14f.github.io/pelican-blog/theme/js/respond.min.js"></script>


</body>
</html>